{% extends 'base.html' %}

{% block contenido %}
<div class="position-relative text-center">
    <img src="https://img.freepik.com/premium-photo/healthy-foods-background-with-copy-space-banner-card-generative-ai_159242-26737.jpg?w=2000"
        class="w-100">
    <div class="position-absolute top-0 start-0 w-100 h-100 overflow-y-auto">

        <div class="d-flex align-items-center justify-content-center h-100">
            <div id="formu" class="card border-0 shadow" style="width: 450px; min-height: 650px; background-color: snow;">

                <div class="card-header" style="background-color: #2DDA89;">
                    <p class="fs-3 fw-bold text-light">Perfil del Usuario</p>
                </div>

                <div class="card-body">

                    <div class="container mt-4">
                        {% with messages = get_flashed_messages(with_categories=True) %}
                        {% if messages %}
                        {% for category, message in messages %}
                        <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} alert-dismissible fade show"
                            role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        {% endfor %}
                        {% endif %}
                        {% endwith %}
                    </div>

                    <div class="row justify-content-center">
                        <div class="col-11">
                            <form id="registro" method="post" action="{{url_for('registro', paso = paso)}}">
                                {% if paso == 1 %}
                                <input type="text" class="form-control border my-3" placeholder="Nombre del usuario" name="nombre"
                                    value="{{ request.form.get('nombre', '') }}">
                                <input type="text" class="form-control border my-3" placeholder="Correo electronico" name="correo"
                                    value="{{ request.form.get('correo', '') }}">
                                <input type="password" class="form-control border my-3" placeholder="Contraseña" name="contraseña"
                                    value="{{ request.form.get('contraseña', '') }}">
                                <div class="row">
                                    <div class="col-4">
                                        <input type="text" class="form-control border my-3" placeholder="Peso(kg)" name="peso"
                                            value="{{ request.form.get('peso', '') }}">
                                    </div>
                                    <div class="col-4">
                                        <input type="text" class="form-control border my-3" placeholder="Altura(cm)" name="altura"
                                            value="{{ request.form.get('altura', '') }}">
                                    </div>
                                    <div class="col-4">
                                        <input type="text" class="form-control border my-3" placeholder="Edad(años)" name="edad"
                                            value="{{ request.form.get('edad', '') }}">
                                    </div>
                                </div>
                                <input type="text" class="form-control border my-3" placeholder="Pega aqui el enlace de tu imagen"
                                    name="imgPerfil" value="{{ request.form.get('imgPerfil', '') }}">

                                <select name="genero" class="form-select my-3" aria-label="Small select example">
                                    <option selected>Selecciona tu genero</option>
                                    <option value="hombre">Hombre</option>
                                    <option value="mujer">Mujer</option>
                                </select>
          
                                <select name="actividad" class="form-select my-3" aria-label="Small select example">
                                    <option selected>Selecciona una opcion</option>
                                    <option value="sedentario">Sedentario</option>
                                    <option value="activo">Activo</option>
                                    <option value="altoRendimiento">Alto rendimiento</option>
                                </select>
                                {% elif paso == 2 %}
                                <p class="fs-5 fw-lighter my-3">Porfavor selecciona uno o mas objetivos:</p>
                                <div class="card border-0">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item mb-3 py-3 rounded-4 shadow-sm" style="background-color:#F6F3EB;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="objetivos" value="Bajar de peso">
                                                <label class="form-check-label" for="checkDefault">
                                                    Bajar de peso
                                                </label>
                                            </div>
                                        </li>
                                        <li class="list-group-item mb-3 py-3 rounded-4 shadow-sm" style="background-color:#F6F3EB;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="objetivos" value="Aumentar masa muscular">
                                                <label class="form-check-label" for="checkDefault">
                                                    Aumentar masa muscular
                                                </label>
                                            </div>
                                        </li>
                                        <li class="list-group-item mb-3 py-3 rounded-4 shadow-sm" style="background-color:#F6F3EB;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="objetivos" value="Mantener peso">
                                                <label class="form-check-label" for="checkDefault">
                                                    Mantener peso
                                                </label>
                                            </div>
                                        </li>
                                        <li class="list-group-item mb-3 py-3 rounded-4 shadow-sm" style="background-color:#F6F3EB;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="objetivos" value="Mejorar digestión">
                                                <label class="form-check-label" for="checkDefault">
                                                    Mejorar digestión
                                                </label>
                                            </div>
                                        </li>
                                        <li class="list-group-item mb-3 py-3 rounded-4 shadow-sm" style="background-color:#F6F3EB;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="objetivos" value="Controlar una condición">
                                                <label class="form-check-label" for="checkDefault">
                                                    Controlar una condición
                                                </label>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                {% else %}
                                <input type="text" class="form-control border my-3" placeholder="El usuario es alergico a algo?" name="alergias"
                                    value="{{ request.form.get('alergias', '') }}">
                                <input type="text" class="form-control border my-3" placeholder="El usuario es intolerante a algo?" name="intolerancias"
                                    value="{{ request.form.get('intolerancias', '') }}">
                                <input type="text" class="form-control border my-3" placeholder="El usuario sigue alguna dieta especifica?" name="dietas"
                                    value="{{ request.form.get('dietas', '') }}">
                                <input type="text" class="form-control border my-3" placeholder="Alimentos que no le gustan" name="disgusta"
                                    value="{{ request.form.get('disgusta', '') }}">
                                <select name="nivel" class="form-select my-3" aria-label="Small select example">
                                    <option selected>Nivel de experiencia en la cocina</option>
                                    <option value="principiante">Principiante</option>
                                    <option value="aficionado">Chef aficionado</option>
                                    <option value="experto">Experto</option>
                                </select>
                                <p>ㅤㅤ</p>
                                <p>ㅤㅤ</p>
                                {% endif %}
                                <button type="submit" class="btn text-light my-3 fs-5" style="background-color: #2DDA89;">
                                    {% if paso == 3 %}
                                    Complete
                                    {% else %}
                                    <i class="bi bi-chevron-right fs-5"></i>
                                    {% endif %}
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="card-footer">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <small class="text-light-emphasis">Progreso</small>
                            <small class="fw-semibold">
                                {% if paso == 1 %}
                                1/3
                                {% elif paso == 2 %}
                                2/3
                                {% else %}
                                3/3
                                {% endif %}
                            </small>
                        </div>
                        <div class="progress bg-black rounded-5" style="height:10px;">
                            <div class="progress-bar" style="background-color: #2DDA89; width: {{'33' if paso == 1 else ('66' if paso == 2 else '100')}}%;"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

{% endblock %}
